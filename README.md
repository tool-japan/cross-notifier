# 株式テクニカル分析通知ツール（日本株専用）

本アプリケーションは、Flask + PostgreSQL + yfinance + SendGrid を用いて、**日本株のテクニカル分析に基づく売買シグナルを自動検出し、メールで通知するシステム**です。

## ✅ 特徴
- 日本株のみに対応（米国株コードは無視されます）
- 毎営業日、**指定された時刻に戦略ごとの分析を実行**
- テクニカル分析結果をメール通知（戦略名・シグナルの強弱付き）
- SendGrid による高速・大量配信

## 🕓 戦略スケジュール（実行時刻）
| 実行時刻 | 戦略名                         | 内容概要 |
|----------|----------------------------------|---------|
| 09:10    | オープニング逆張りスナイパー     | RSI・ストキャスで逆張りシグナルを検出 |
| 09:40    | モーニングトレンドハンター       | 初期トレンド検出（MA, RSI）|
| 10:05    | ボリュームライディングブレイカー | 出来高×トレンド判断による順張り |
| 10:30    | ボリュームライディングブレイカー | 同上（2段構え） |
| 11:00    | サイレント・ゾーン・スキャナー   | 低ボラ検出・様子見判断 |
| 12:40    | リバーサル・シーカー             | トレンド反転の兆候検出（MACDなど） |
| 13:10    | リバーサル・シーカー             | 同上 |
| 13:40    | リバーサル・シーカー             | 同上 |
| 14:10    | クロージング・サージ・スナイパー | 引け前の出来高急増・ブレイク判定 |
| 14:30    | クロージング・サージ・スナイパー | 同上 |

## 📦 使用技術
- Python 3.11+
- Flask（Webアプリケーション基盤）
- SQLAlchemy + PostgreSQL（ユーザーDB）
- yfinance（株価データ取得）
- pandas-ta（テクニカル分析）
- SendGrid（メール通知）

## ⚙️ .env ファイル設定
`.env` ファイルに以下を記述してください：

```dotenv
SENDGRID_API_KEY=あなたのSendGrid APIキー
SENDGRID_FROM_EMAIL=送信元メールアドレス（SendGridで認証済みのもの）
```

## 🏃‍♂️ 実行方法（Renderでの運用推奨）
- `run_bot.py` を Render の「Background Worker」やcronで30分間隔などでスケジューリング
- 自動的に現在時刻と戦略に応じて処理が切り替わります

## 👤 ユーザー管理
ユーザーごとに以下の情報が登録され、通知設定をONにすることでメール通知が届きます：
- 登録銘柄リスト（日本株コードのみ対応。例：7203）
- メールアドレス
- 通知ON/OFF

## 📧 通知内容（例）
```
【戦略】オープニング逆張りスナイパー
通知時刻（日本時間）: 2025-04-14 09:10:05

7203
ゴールデンクロス（強） → 買い気配
トヨタ自動車株式会社
https://finance.yahoo.co.jp/quote/7203.T
```

## 🚧 今後の実装予定（例）
- 各戦略ごとの分析指標ロジックの追加（RSI、出来高、MACDなど）
- LINE通知への拡張
- ユーザー別に通知戦略のカスタマイズ対応

---

## 🧠 補足
- 現在は **09:10の「オープニング逆張りスナイパー」戦略のみ分析ロジックが実装**されています（RSI + ストキャス）。他戦略は順次追加予定。
- 米国株（AAPLなど）は無視されます（日本株のみに対応）

---
